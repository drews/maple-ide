<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><title>Maple Reference Documentation</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<link rel="stylesheet" href="minimal.css" type="text/css">
</head><body> 
<!-- minimalist html; this is designed to be copy/pasted into a website -->
<!-- STARTDOC -->
<h1>Maple Reference Documentation: USART</h1>

<ul>
  <li><a href="#hardware">Hardware/Circuit Design</a>
  <li><a href="#compat">Compatible Devices and Specifications</a>
  <li><a href="#functions">Function Reference</a>
</ul>

<h2><a name="hardware">Hardware/Circuit Design</a></h2>

The Maple has 3 separate USART devices: Serial1, Serial2, and Serial3. In the
most simple use case the RX and TX pins are used to send data at a
predetermined baudrate with the line voltage level relative to ground. 
<table>
  <tr><th>Port      <th>Function         <th>Pin
  <tr><td>Serial1   <td>TX <br>RX <br>CK 
                    <td>D7 <br>D8 <br>D6

  <tr><td>Serial2   <td>TX <br>RX <br>CK <br>CTS <br>RTS         
                    <td>D1 <br>D0 <br>D10 <br>D2 <br>D3

  <tr><td>Serial3   <td>TX <br>RX <br>CK <br>CTS <br>RTS         
                    <td>D29 <br>D30 <br>D31 <br>D32 <br>D33
</table>

<h2><a name="compat">Compatible Devices and Specifications</a></h2>

We have successfully used the Maple USART ports with an FT232R-based USB-serial
converter at up to 115200 baud; higher speeds should certainly be possible. 
 
<h2><a name="functions">Function Reference</a></h2>

In the following replace "SerialN" with Serial1, Serial2, or Serial3.

<dl>
  <dt><code>SerialN.begin(baudrate)</code>
  <dd><code>begin()</code> is usually called in <code>setup()</code> to
  configure the baudrate of the given serial port and to set up the header pins
  appropriately. It can be called at any time to reconfigure a port or to
  change the baudrate. 9600 baud is the generic speed most widely supported by
  other devices and terminals.

  <dt><code>SerialN.print(...)</code><br>
      <code>SerialN.println(...)</code>
  <dd>Writes data into the port buffer to be transmitted as soon as possible.
  Accepts strings (character arrays). If a raw integer is passed the
  corresponding ASCII character will be transmitted; to print out a number in
  human readable form add a second parameter with the base system. Eg, to print
  out the decimal number '1234' use <code>print(1234,DEC)</code>; to print out
  the binary numner '1001' use <code>print(9,BIN)</code>. 

  <dt><code>SerialN.available()</code><br>
      <code>SerialN.read()</code>
  <dd><code>read()</code> will return any data that has been recieved over the
  port and <code>available()</code> will tell if any such data acutally exists,
  and if so how many bytes. If there is no data <code>read()</code> will
  block/fail, so the usual program structure is to poll with
  <code>available()</code> and only <code>read()</code> if there's something
  ready. 
</dl>

<h2><a name="links">Recommended Reading</a></h2>
<ul>
  <li><a href="http://en.wikipedia.org/wiki/Universal_asynchronous_receiver/transmitter">Wikipedia article on Universal asynchronous receiver/transmitter (USART)</a>
  <li><a href="http://arduino.cc/en/Reference/Serial">Arduino reference on Serial</a>
  <li>STMicro documentation for STM32F103RB microcontroller:<ul>
    <li><a href="http://www.st.com/mcu/devicedocs-STM32F103RB-110.html">All</a>
    <li><a href="http://www.st.com/stonline/products/literature/ds/13587.pdf">Datasheet (pdf)</a>
    <li><a href="http://www.st.com/stonline/products/literature/rm/13902.pdf">Reference Manual (pdf)</a>
    </ul>
</ul>


<div class="box">
<h3><i>About this Document</i></h3>
A more recent version of this document may be available from the 
<a href="http://leaflabs.com">LeafLabs website</a>. Our documentation is
versioned on <a href="http://github.com">github</a>; you can track changes
to the master branch at <a href="http://github.com/leaflabs/maple-ide/tree/master/build/shared/reference/">this link</a>.
<p>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
<img alt="Creative Commons License" style="border-width:0" 
    src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
<br /><i>This documentation is released under a 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
Creative Commons Attribution-Share Alike 3.0</a> license.</i>
<p>
Translations are welcomed; give us a ping to make sure we aren't in the
process of revising or editing first.
</div>
<!-- ENDDOC -->
</body></html>
