<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><title>Maple Reference Documentation</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<link rel="stylesheet" href="minimal.css" type="text/css">
</head><body> 
<!-- minimalist html; this is designed to be copy/pasted into a website -->
<!-- STARTDOC -->
<h1>Maple Development Reference: Installation</h1>
<i>If you still can't get the IDE installed after reading this page, check the <a
href="./troubleshooting.html">troubleshooting</a> page for help with some common
problems. If all else fails try <a
href="http://google.com/?q=maple+help">google</a>, our <a
href="http://forums.leaflabs.com">forum</a>, or <a
href="http://leaflabs.com/contact">contact us directly</a>!</i>

<ul>
  <li><a href="#download">Download</a>
  <li><a href="#java">Java</a>
  <li><a href="#linux">Linux Directions</a>
  <li><a href="#windows">Windows Directions</a>
  <li><a href="#macosx">Mac OSX Directions</a>
</ul>

<h2><a name="download">Download</a></h2>
The latest binary release of the Maple IDE for popular platforms can be
downloaded straight from LeafLabs's server using the links below. The package
bundles together a compiler, an upload utility, a software library, and a
simple GUI text editor to tie it all together.

<p>
All this software is <a href="http://fsf.org">free and open</a>, feel free to
redistribute, hack, and generally mess around with it! We're grateful to the
<a href="http://arduino.cc">Arduino</a>, <a
href="http://www.codesourcery.com">CodeSourcery</a>, <a
href="http://gnu.org">GNU</a>, and <a href="http://openmoko.com">OpenMoko</a>
developers, as well as many others, who allow us to reuse their software.

<table>
<tr>
  <td>Linux
  <td>Tested on Ubuntu 9.10 (64bit) and 10.04 (32bit)
  <td><a href="http://static.leaflabs.com/pub/leaflabs/maple-ide/maple-ide-LATEST-linux32.tgz">maple-ide-LATEST-linux32.tgz</a> (about 30mb)
  <br><a href="http://static.leaflabs.com/pub/leaflabs/maple-ide/maple-ide-LATEST-linux64.tgz">maple-ide-LATEST-linux64.tgz</a> (about 30mb)
<tr>
  <td>Mac OSX
  <td>Tested on Snow Leopard 10.6 (64bit and 32bit)
  <td><a href="http://static.leaflabs.com/pub/leaflabs/maple-ide/maple-ide-LATEST-macosx-10_6.dmg">maple-ide-LATEST-macosx-10_6.dmg</a> (about 40mb)
<tr>
  <td>Windows
  <td>Tested on 32bit Windows XP
  <td><a href="http://static.leaflabs.com/pub/leaflabs/maple-ide/maple-ide-LATEST-windowsxp32.zip">maple-ide-LATEST-windowsxp32.zip</a> (about 75mb)
</table>

<h2><a name="java">Java</a></h2>

The IDE is written in Java and requires a compatible runtime (JRE). Our windows
release includes runtime, Mac OSX has one installed already, and it's pretty
easy to install one on Linux. If you already have a JRE setup you can skip to
the next step; <a href="http://sun.com/java">Sun Java 1.6</a> and <a
href="http://openjdk.java.net/">OpenJDK 1.6</a> are known to work, and
runtimes mostly compatible with Sun Java 1.4+ should probably get the job
done. 

<p>
To install Java on a linux/unix system, try using your distribution's software
packaging tool and search for "JRE" or "java". On modern Debian-based systems
(including Ubuntu) you can try to install the OpenJDK 1.6 JRE with:

<pre class="code">
$ sudo aptitude install openjdk-6-jre
</pre>

<h2><a name="linux">Linux Directions</a></h2>

Once it's downloaded, you need to chose a place to unzip the IDE. Unless
you've got a special place of honor in mind just plop it on your desktop or in
your home folder. Your system should have a tool to deal with the file time of
the archive (gzipped tar files on Linux, .dmg archives on Mac OSX, and classic
.zip files on Windows); make sure you actually extract the contents out of the
archive instead of running it live out of the archive file.

<p>
On Linux the tar tool can be used from the command line a la:
<pre class="code">
$ tar -xvf maple-ide-SOMETHING.tgz
</pre>

<p>
In the long run you might want to move the extracted program around; that's
fine, your programs (sketches) and configuration options will be stored in your
home folder (changeable in the Preferences menu).

<h4>Install udev rules</h4>

As a security precaution, new USB devices like the Maple are accessible only by
the root user on Linux systems. It's thrilling to run around with root
permissions every now and then but in the long run it's safer to configure the
operating system to allow regular users access to the Maple when it's plugged
in.

<p>
Enter the unzipped maple-ide folder and run the install-udev-rules.sh script to
configure the system so that members of the "plugdev" group can access the
maple device automatically; it will ask for root permissions (via "sudo"). Or
you can manually copy the <code>45-maple.rules</code> file into
<code>/etc/udev/rules.d</code> and set the appropriate permissions.

<p>
If the 'plugdev' group doesn't exist or you are not a member of it, you can
create it and add <code>ben_bitdiddle</code> a la:
<pre class="code">
$ sudo addgroup plugdev
$ sudo usermod -G plugdev ben_bitdiddle
$ sudo /etc/init.d/udev restart
</pre>

<p>
If this doesn't work out for you (eg, an error gets thrown or later on you
can't upload your program or connect to the serial port), as a temporary or
last resort measure you can run the entire IDE as root (<code>sudo
maple-ide</code>).

<h2><a name="macosx">Mac OS X Directions</a></h2>

Once it's downloaded, you need to chose a place to unzip the IDE. Unless
you've got a special place of honor in mind just plop it on your desktop or in
your home folder. Your system should have a tool to deal with the file type of
the archive (.dmg archives on Mac OSX); once the archive is open, you can
either drag the Maple IDE folder into the link to your Applications folder for
a permanent installation, or drag it to you desktop for now. 

<p>
In the long run you might want to move the extracted program around; that's
fine, your programs (sketches) and configuration options will be stored in your
home folder (changeable in the Preferences menu).

<p>
An ACM modem setup dialog will pop up everytime you plug in the Maple; if you
go to Network Settings and accept the default ("unconfigured") settings the
dialog won't pop up and everything will work fine.

<h2><a name="windows">Windows Directions</a></h2>

Once the IDE is downloaded, you need to chose a place to unzip the IDE. Unless
you've got a special place of honor in mind just plop it on your desktop or in
your home folder. Your system should have a tool to deal with the file time of
the archive (classic .zip files on Windows); make sure you actually extract the
contents out of the archive instead of running it live out of the archive file.

<p>
In the long run you might want to move the extracted program around; that's
fine, your programs (sketches) and configuration options will be stored in your
home folder (changeable in the Preferences menu).

<p>
The Maple runs in one of two modes, and requires drivers for each. After reset,
it runs in bootloader mode for about 6 seconds. In this mode, the Maple is
configured to act as a DFU (device firmware upgrade) device; this is how 
it receives code from the host computer. Windows does not come bundled with DFU
drivers, so we have provided them using libusb. After the 6 second timeout,
Maple will exit DFU mode and jump to whatever code you have uploaded to it.
While running your code, another set of drivers are needed to implement the
serial over USB (virtual COM) port.

<p>
To install the <b>DFU drivers</b>:
<ol>
  <li>Plug your maple into the USB port

  <li>Hit reset a few times and notice the 6 fast blinks followed by some
  number of slower ones.

  <li>Hit reset again, and this time push and hold the boot button during the 6
  fast blinks. You can release it once the slow blinks start

  <li>Maple should now be in perpetual bootloader mode. In this mode, Maple
  stays a DFU device and does not jump to user code until the next reset. This
  should give you a chance to install the DFU drivers.

  <li>Windows should now prompt you for some drivers. In the top level
  directory of the Maple IDE, point Windows to
  <code>drivers/mapleDrv/dfu/</code>.
</ol>

Then, to install the <b>serial drivers</b>:
<ol>
  <li>Reset Maple and allow it to exit the bootloader (the slow blinking should
  stop and transition to something else). If there is no user code currently in
  memory (there should have been when you got it), then flash some on there
  using the instruction elsewhere in this document.

  <li>Once Maple is running some user code, windows should prompt you for more
  drivers. Point windows to <code>driver/mapleDrv/serial</code>.
</ol>

<div class="box">
<h3><i>About this Document</i></h3>
A more recent version of this document may be available from the 
<a href="http://leaflabs.com">LeafLabs website</a>. Our documentation is
versioned on <a href="http://github.com">github</a>; you can track changes
to the master branch at <a href="http://github.com/leaflabs/maple-ide/tree/master/build/shared/reference/">this link</a>.
<p>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
<img alt="Creative Commons License" style="border-width:0" 
    src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
<br /><i>This documentation is released under a 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
Creative Commons Attribution-Share Alike 3.0</a> license.</i>
<p>
Translations are welcomed; give us a ping to make sure we aren't in the
process of revising or editing first.
</div>
<!-- ENDDOC -->
</body></html>
